<!DOCTYPE html>

<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Tool tạo bài viết gái xinh nâng cao + API OpenAI</title>
  <style>
    body { 
      font-family: 'Segoe UI', Arial, sans-serif; 
      max-width: 1000px; 
      margin: auto; 
      padding: 20px; 
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      min-height: 100vh;
    }
    .container {
      background: white;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }
    h2 { 
      text-align: center; 
      color: #2c3e50;
      margin-bottom: 30px;
      font-size: 28px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }
    .form-group {
      margin-bottom: 20px;
    }
    label { 
      font-weight: bold; 
      display: block; 
      margin-bottom: 8px;
      color: #34495e;
      font-size: 16px;
    }
    input[type=text], select, textarea {
      width: 100%; 
      padding: 12px; 
      border: 2px solid #e0e0e0; 
      border-radius: 8px;
      font-size: 14px;
      transition: border-color 0.3s ease;
    }
    input[type=text]:focus, select:focus, textarea:focus {
      border-color: #3498db;
      outline: none;
      box-shadow: 0 0 10px rgba(52, 152, 219, 0.3);
    }
    textarea { 
      height: 200px; 
      font-family: 'Consolas', monospace; 
      resize: vertical; 
    }
    .btn-group {
      display: flex;
      gap: 15px;
      margin: 20px 0;
      flex-wrap: wrap;
    }
    button {
      padding: 12px 25px; 
      font-weight: bold;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white; 
      border: none; 
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      transition: all 0.3s ease;
      flex: 1;
      min-width: 200px;
    }
    button:hover { 
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    .btn-secondary {
      background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
    }
    .dropzone {
      border: 3px dashed #bdc3c7; 
      border-radius: 15px; 
      padding: 40px;
      text-align: center; 
      color: #7f8c8d; 
      cursor: pointer; 
      transition: all 0.3s ease;
      background: #f8f9fa;
    }
    .dropzone.dragover { 
      border-color: #3498db; 
      color: #2c3e50; 
      background: #e3f2fd;
      transform: scale(1.02);
    }
    .image-preview { 
      margin: 20px 0; 
      text-align: center; 
    }
    .image-preview img { 
      max-width: 100%; 
      max-height: 400px;
      border-radius: 10px; 
      box-shadow: 0 8px 25px rgba(0,0,0,0.15); 
    }
    .loading-modal {
      background-color: rgba(0,0,0,0.8);
      display: none; 
      position: fixed; 
      z-index: 10000;
      top: 0; 
      left: 0; 
      height: 100%; 
      width: 100%;
    }
    .loading-modal.show {
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .loading-content {
      background: white;
      padding: 40px;
      border-radius: 15px;
      text-align: center;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }
    .loading-spinner {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #3498db;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
      margin: 0 auto 20px;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    .loading-text {
      font-size: 18px; 
      color: #2c3e50; 
      font-weight: bold;
    }
    .text-center { 
      text-align: center; 
      margin: 20px 0; 
    }
    .btnlook.download-wall {
      padding: 15px 25px;
      border: 2px solid #e74c3c;
      border-radius: 8px;
      text-decoration: none;
      font-weight: bold;
      display: inline-block;
      color: #e74c3c;
      transition: all 0.3s ease;
    }
    .btnlook.download-wall:hover {
      background-color: #e74c3c;
      color: white;
      transform: translateY(-2px);
    }
    .topic-category {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 10px;
      margin: 10px 0;
    }
    .topic-category h4 {
      margin: 0 0 10px 0;
      color: #2c3e50;
      font-size: 16px;
    }
    .features-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    .feature-card {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
    }
    .advanced-options {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 10px;
      margin: 20px 0;
    }
    .checkbox-group {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 10px;
      margin: 15px 0;
    }
    .checkbox-item {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .checkbox-item input[type="checkbox"] {
      width: auto;
      margin: 0;
    }
  </style>
</head>
<body>

<div class="container">
  <h2>🌟 Tool Tạo Bài Viết Gái Xinh Nâng Cao + AI</h2>

  <div class="features-grid">
    <div class="feature-card">
      <h3>📱 Social Media</h3>
      <p>Facebook, Instagram, Twitter, TikTok</p>
    </div>
    <div class="feature-card">
      <h3>🌍 Đa Quốc Gia</h3>
      <p>Việt Nam, Châu Âu, Nhật Bản, Mỹ</p>
    </div>
    <div class="feature-card">
      <h3>🎨 Đa Dạng Chủ Đề</h3>
      <p>Bikini, Cosplay, Áo dài, Cute</p>
    </div>
  </div>

  <div class="form-group">
    <label>📸 Upload ảnh thumbnail (Imgur):</label>
    <div class="dropzone" id="dropzone">
      <div>🖼️ Kéo ảnh vào đây hoặc click để chọn</div>
      <small>Hỗ trợ: JPG, PNG, GIF (Max: 10MB)</small>
    </div>
    <div class="image-preview" id="imagePreview"></div>
    <input type="hidden" id="imgurLink" />
  </div>

  <div class="form-group">
    <label>🎬 Nhập link video MP4 (tùy chọn):</label>
    <input type="text" id="videoLink" placeholder="https://example.com/video.mp4 (để trống nếu chỉ có ảnh)" />
  </div>

  <div class="form-group">
    <label>🧍‍♀️ Tên nhân vật (tùy chọn):</label>
    <input type="text" id="characterName" placeholder="Ví dụ: Ngọc Trinh, Arisa, Lisa, hoặc để trống..." />
  </div>

  <div class="form-group">
    <label>🌏 Chọn quốc gia/khu vực:</label>
    <select id="country">
      <option value="Việt Nam">🇻🇳 Việt Nam</option>
      <option value="Nhật Bản">🇯🇵 Nhật Bản</option>
      <option value="Hàn Quốc">🇰🇷 Hàn Quốc</option>
      <option value="Trung Quốc">🇨🇳 Trung Quốc</option>
      <option value="Thái Lan">🇹🇭 Thái Lan</option>
      <option value="Châu Âu">🇪🇺 Châu Âu</option>
      <option value="Mỹ">🇺🇸 Mỹ</option>
      <option value="Quốc tế">🌍 Quốc tế</option>
    </select>
  </div>

  <div class="form-group">
    <label>📚 Chọn chủ đề chi tiết:</label>
    <select id="topic">
      <optgroup label="📱 Social Media">
        <option value="facebook">Gái xinh Facebook</option>
        <option value="instagram">Gái xinh Instagram</option>
        <option value="twitter">Gái xinh Twitter</option>
        <option value="tiktok">Gái xinh TikTok</option>
      </optgroup>

```
  <optgroup label="🌍 Theo khu vực">
    <option value="gaixinh-vn">Ảnh Gái Xinh VN</option>
    <option value="gaixinh-chauau">Ảnh Gái Xinh Châu Âu Mỹ</option>
    <option value="gaixinh-nhat">Ảnh Gái Nhật Xinh Đẹp</option>
    <option value="gaixinh-chauau-hinh">Hình Ảnh Gái Xinh Châu Âu</option>
  </optgroup>
  
  <optgroup label="🎨 Phong cách & Trang phục">
    <option value="gaixinh-tocngan">Gái Xinh Tóc Ngắn</option>
    <option value="gaixinh-bikini">Gái Xinh Mặc Bikini</option>
    <option value="gaixinh-aodai">Gái Xinh Mặc Áo Dài Việt Nam</option>
    <option value="gaixinh-cute">Ảnh Gái Xinh Cute</option>
    <option value="gaixinh-cosplay">Ảnh Gái Cosplay</option>
  </optgroup>
  
  <optgroup label="🎯 Độ tuổi & Nhóm">
    <option value="gaixinh-cap3">Gái Xinh Cấp 3</option>
    <option value="gaixinh-hocsinh">Gái Xinh Học Sinh</option>
    <option value="gaixinh-sinhvien">Gái Xinh Sinh Viên</option>
  </optgroup>
  
  <optgroup label="📁 Bộ sưu tập">
    <option value="bosuutap-gaixinh">Bộ Sưu Tập Ảnh Gái Xinh</option>
    <option value="hinhnengaixinh">Bộ Sưu Tập Hình Nền Gái Xinh</option>
    <option value="album-gaixinh">Album Ảnh Gái Xinh</option>
  </optgroup>
  
  <optgroup label="🎭 Chủ đề khác">
    <option value="hotgirl">Hot Girl</option>
    <option value="dienvien">Diễn Viên</option>
    <option value="nguoimau">Người Mẫu</option>
    <option value="idol">Idol</option>
    <option value="influencer">Người Nổi Tiếng</option>
  </optgroup>
</select>
```

  </div>

  <div class="form-group">
    <label>✍️ Phong cách viết bài:</label>
    <select id="style">
      <option value="goi-cam">Gợi cảm, quyến rũ</option>
      <option value="nhe-nhang">Nhẹ nhàng, giới thiệu cá nhân</option>
      <option value="seo-friendly">SEO thân thiện</option>
      <option value="viral">Thu hút tương tác</option>
      <option value="chuyen-nghiep">Chuyên nghiệp</option>
    </select>
  </div>

  <div class="advanced-options">
    <h4>🔧 Tùy chọn nâng cao:</h4>
    <div class="checkbox-group">
      <div class="checkbox-item">
        <input type="checkbox" id="includeHashtags" checked>
        <label for="includeHashtags">Thêm hashtags</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="includeMeta" checked>
        <label for="includeMeta">Thêm meta description</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="includeKeywords">
        <label for="includeKeywords">Tối ưu từ khóa</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="includeSocial">
        <label for="includeSocial">Nút chia sẻ mạng xã hội</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="includeRelated">
        <label for="includeRelated">Bài viết liên quan</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="includeComment">
        <label for="includeComment">Khung bình luận</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="includeRating">
        <label for="includeRating">Hệ thống đánh giá</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="includeGallery">
        <label for="includeGallery">Gallery ảnh</label>
      </div>
    </div>

```
<div class="form-group" style="margin-top: 15px;">
  <label>🎨 Màu chủ đạo:</label>
  <select id="colorTheme">
    <option value="blue">Xanh dương (Chuyên nghiệp)</option>
    <option value="pink">Hồng (Nữ tính)</option>
    <option value="purple">Tím (Sang trọng)</option>
    <option value="red">Đỏ (Nổi bật)</option>
    <option value="green">Xanh lá (Tự nhiên)</option>
    <option value="dark">Tối (Hiện đại)</option>
  </select>
</div>
```

  </div>

  <div class="form-group">
    <label>🎨 Chọn template bài viết có sẵn:</label>
    <select id="templateSelect" onchange="loadTemplate()">
      <option value="">-- Chọn template --</option>
      <option value="viral-social">🔥 Template Viral Social Media</option>
      <option value="seo-blog">📈 Template SEO Blog</option>
      <option value="collection">📁 Template Bộ Sưu Tập</option>
      <option value="review">⭐ Template Review/Đánh Giá</option>
      <option value="trend">📊 Template Xu Hướng</option>
      <option value="comparison">⚖️ Template So Sánh</option>
    </select>
  </div>

  <div class="form-group">
    <label>📏 Độ dài bài viết:</label>
    <select id="articleLength">
      <option value="short">Ngắn (200-300 từ)</option>
      <option value="medium" selected>Trung bình (400-600 từ)</option>
      <option value="long">Dài (700-1000 từ)</option>
      <option value="detailed">Chi tiết (1000+ từ)</option>
    </select>
  </div>

  <div class="form-group">
    <label>🎯 Đối tượng độc giả:</label>
    <select id="targetAudience">
      <option value="general">Tổng quát</option>
      <option value="young">Giới trẻ (18-25)</option>
      <option value="adult">Người trưởng thành (25-35)</option>
      <option value="photography">Yêu thích nhiếp ảnh</option>
      <option value="fashion">Quan tâm thời trang</option>
      <option value="social-media">Người dùng mạng xã hội</option>
    </select>
  </div>

  <div class="btn-group">
    <button onclick="generateArticleOpenAI()">🤖 Tạo bài viết AI</button>
    <button class="btn-secondary" onclick="generateTemplate()">📋 Tạo template nhanh</button>
    <button class="btn-secondary" onclick="generateMultiple()">🔄 Tạo nhiều phiên bản</button>
  </div>

  <div class="form-group">
    <label>Kết quả bài viết (HTML đầy đủ):</label>
    <textarea id="resultHTML" readonly placeholder="Kết quả sẽ hiển thị tại đây..."></textarea>
  </div>

  <div class="btn-group">
    <button class="btn-secondary" onclick="copyResult()">📄 Sao chép HTML</button>
    <button class="btn-secondary" onclick="previewResult()">👁️ Xem trước</button>
    <button class="btn-secondary" onclick="downloadHTML()">💾 Tải về HTML</button>
    <button class="btn-secondary" onclick="saveToHistory()">💾 Lưu vào lịch sử</button>
  </div>

  <div class="form-group">
    <label>📚 Lịch sử bài viết:</label>
    <select id="historySelect" onchange="loadFromHistory()">
      <option value="">-- Chọn từ lịch sử --</option>
    </select>
    <button class="btn-secondary" onclick="clearHistory()" style="margin-top: 10px; width: 200px;">🗑️ Xóa lịch sử</button>
  </div>

  <div class="statistics" style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h4>📊 Thống kê bài viết:</h4>
    <div id="stats">
      <p>Số từ: <span id="wordCount">0</span></p>
      <p>Số ký tự: <span id="charCount">0</span></p>
      <p>Thời gian đọc ước tính: <span id="readTime">0 phút</span></p>
      <p>Điểm SEO: <span id="seoScore">0/100</span></p>
    </div>
  </div>

</div>

<div class="loading-modal" id="loadingModal">
  <div class="loading-content">
    <div class="loading-spinner"></div>
    <div class="loading-text">Đang xử lý AI...</div>
    <p>Vui lòng chờ trong giây lát</p>
  </div>
</div>

<script>
const clientId = '3a8be4390ef3eb8';
const dropzone = document.getElementById('dropzone');
const imagePreview = document.getElementById('imagePreview');
const imgurLinkInput = document.getElementById('imgurLink');

// Drag and drop functionality
dropzone.addEventListener('dragover', e => {
  e.preventDefault();
  dropzone.classList.add('dragover');
});
dropzone.addEventListener('dragleave', e => {
  dropzone.classList.remove('dragover');
});
dropzone.addEventListener('drop', e => {
  e.preventDefault();
  dropzone.classList.remove('dragover');
  if(e.dataTransfer.files.length) uploadFile(e.dataTransfer.files[0]);
});
dropzone.addEventListener('click', () => {
  const fileInput = document.createElement('input');
  fileInput.type = 'file';
  fileInput.accept = 'image/*';
  fileInput.onchange = () => {
    if(fileInput.files.length) uploadFile(fileInput.files[0]);
  };
  fileInput.click();
});

function uploadFile(file) {
  if(!file.type.startsWith('image/')) {
    alert('❌ Vui lòng chọn file ảnh!');
    return;
  }
  if(file.size > 10 * 1024 * 1024) {
    alert('❌ File quá lớn! Vui lòng chọn ảnh dưới 10MB.');
    return;
  }
  
  showLoading(true);
  const formData = new FormData();
  formData.append('image', file);

  fetch('https://api.imgur.com/3/image', {
    method: 'POST',
    headers: { Authorization: 'Client-ID ' + clientId },
    body: formData
  })
  .then(res => res.json())
  .then(data => {
    showLoading(false);
    if(data.success) {
      const link = data.data.link;
      imgurLinkInput.value = link;
      imagePreview.innerHTML = `<img src="${link}" alt="Thumbnail">`;
      alert('✅ Upload ảnh thành công!');
    } else {
      alert('❌ Upload ảnh thất bại!');
    }
  })
  .catch(() => {
    showLoading(false);
    alert('❌ Lỗi upload ảnh!');
  });
}

function showLoading(show) {
  document.getElementById('loadingModal').classList.toggle('show', show);
}

function getTopicDetails(topic) {
  const topics = {
    'facebook': { name: 'Facebook', category: 'social media', keywords: 'facebook, social, gái xinh fb' },
    'instagram': { name: 'Instagram', category: 'social media', keywords: 'instagram, insta, gái xinh ig' },
    'twitter': { name: 'Twitter', category: 'social media', keywords: 'twitter, gái xinh twitter' },
    'tiktok': { name: 'TikTok', category: 'social media', keywords: 'tiktok, video, gái xinh tiktok' },
    'gaixinh-vn': { name: 'Gái Xinh Việt Nam', category: 'regional', keywords: 'gái xinh việt nam, vn, vietnam' },
    'gaixinh-chauau': { name: 'Gái Xinh Châu Âu Mỹ', category: 'regional', keywords: 'gái xinh châu âu, mỹ, tây' },
    'gaixinh-nhat': { name: 'Gái Xinh Nhật Bản', category: 'regional', keywords: 'gái xinh nhật, japan, nhật bản' },
    'gaixinh-tocngan': { name: 'Gái Xinh Tóc Ngắn', category: 'style', keywords: 'tóc ngắn, short hair, gái xinh' },
    'gaixinh-bikini': { name: 'Gái Xinh Bikini', category: 'style', keywords: 'bikini, đồ bơi, gái xinh' },
    'gaixinh-aodai': { name: 'Gái Xinh Áo Dài', category: 'style', keywords: 'áo dài, truyền thống, việt nam' },
    'gaixinh-cute': { name: 'Gái Xinh Cute', category: 'style', keywords: 'cute, dễ thương, gái xinh' },
    'gaixinh-cosplay': { name: 'Gái Cosplay', category: 'style', keywords: 'cosplay, anime, manga' },
    'bosuutap-gaixinh': { name: 'Bộ Sưu Tập Gái Xinh', category: 'collection', keywords: 'bộ sưu tập, album, collection' },
    'hinhnengaixinh': { name: 'Hình Nền Gái Xinh', category: 'collection', keywords: 'hình nền, wallpaper, background' }
  };
  return topics[topic] || { name: topic, category: 'general', keywords: topic };
}

async function generateArticleOpenAI() {
  const img = document.getElementById('imgurLink').value.trim();
  const video = document.getElementById('videoLink').value.trim();
  const name = document.getElementById('characterName').value.trim();
  const country = document.getElementById('country').value;
  const topic = document.getElementById('topic').value;
  const style = document.getElementById('style').value;

  if(!img) return alert('❌ Vui lòng upload ảnh trước!');

  showLoading(true);
  
  const topicDetails = getTopicDetails(topic);
  const styleMap = {
    'goi-cam': 'gợi cảm, quyến rũ',
    'nhe-nhang': 'nhẹ nhàng, tinh tế',
    'seo-friendly': 'tối ưu SEO, chuyên nghiệp',
    'viral': 'thu hút, viral',
    'chuyen-nghiep': 'chuyên nghiệp, trang trọng'
  };

  const prompt = `Viết một bài viết dài, cuốn hút về ${name || 'cô gái xinh đẹp'} ở ${country} theo chủ đề "${topicDetails.name}". 
  Phong cách: ${styleMap[style]}. 
  Yêu cầu:
  - Từ 300-500 từ
  - Mô tả sinh động, hấp dẫn
  - Phù hợp làm bài viết blog/website
  - Tích cực, tôn vinh vẻ đẹp
  - Không nội dung nhạy cảm
  Chỉ trả về nội dung bài viết, không cần tiêu đề.`;

  try {
    const response = await fetch('https://api.openai.com/v1/chat/completions', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': 'Bearer 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'
      },
      body: JSON.stringify({
        model: 'gpt-4o-mini',
        messages: [{ role: 'user', content: prompt }],
        max_tokens: 800,
        temperature: 0.8,
      }),
    });
    
    if (!response.ok) {
      const err = await response.json();
      throw new Error(err.error?.message || 'Lỗi API OpenAI');
    }
    
    const data = await response.json();
    const aiText = data.choices[0].message.content;

    generateHTMLOutput(aiText, img, video, name, country, topicDetails);
    
  } catch(err) {
    alert('❌ Lỗi gọi API OpenAI: ' + err.message);
  } finally {
    showLoading(false);
  }
}

function generateTemplate() {
  const img = document.getElementById('imgurLink').value.trim();
  const video = document.getElementById('videoLink').value.trim();
  const name = document.getElementById('characterName').value.trim();
  const country = document.getElementById('country').value;
  const topic = document.getElementById('topic').value;
  
  if(!img) return alert('❌ Vui lòng upload ảnh trước!');
  
  const topicDetails = getTopicDetails(topic);
  const templateText = `Khám phá vẻ đẹp tuyệt vời của ${name || 'cô gái xinh đẹp'} trong bộ ảnh ${topicDetails.name} ${country} đang gây sốt trên mạng xã hội. 

Với phong cách ${topicDetails.name.toLowerCase()}, ${name || 'cô ấy'} đã thu hút hàng ngàn lượt yêu thích và bình luận từ cộng đồng mạng. Những hình ảnh được chụp một cách tinh tế, tôn lên vẻ đẹp tự nhiên và cuốn hút.

Bộ sưu tập này không chỉ đơn thuần là những bức ảnh đẹp mà còn thể hiện phong cách thời trang hiện đại và xu hướng được nhiều bạn trẻ yêu thích hiện nay.`;

  generateHTMLOutput(templateText, img, video, name, country, topicDetails);
}

function generateHTMLOutput(content, img, video, name, country, topicDetails) {
  const includeHashtags = document.getElementById('includeHashtags').checked;
  const includeMeta = document.getElementById('includeMeta').checked;
  const includeKeywords = document.getElementById('includeKeywords').checked;
  const includeSocial = document.getElementById('includeSocial').checked;

  const subject = name || `${topicDetails.name} ${country}`;
  const title = `${subject} - ${topicDetails.name} ${country} Đẹp Nhất`;
  const desc = `Xem ngay bộ ảnh ${topicDetails.name} ${country} của ${subject} đang viral trên mạng xã hội với hàng ngàn lượt thích.`;

  let hashtags = '';
  if (includeHashtags) {
    hashtags = `<p><strong>Hashtags:</strong> #${topicDetails.keywords.replace(/[, ]+/g, ' #')} #${country.replace(/\s+/g, '')} #viral</p>`;
  }

  let socialButtons = '';
  if (includeSocial) {
    socialButtons = `
    <div class="social-share" style="text-align: center; margin: 20px 0;">
      <h4>Chia sẻ bài viết:</h4>
      <a href="https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}" target="_blank" style="margin: 0 10px; padding: 10px 15px; background: #4267B2; color: white; text-decoration: none; border-radius: 5px;">Facebook</a>
      <a href="https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}&text=${encodeURIComponent(title)}" target="_blank" style="margin: 0 10px; padding: 10px 15px; background: #1DA1F2; color: white; text-decoration: none; border-radius: 5px;">Twitter</a>
    </div>`;
  }

  let videoSection = '';
  if (video) {
    videoSection = `
<div style="display: none;">
  <div id="live-wallpaper">
    <video class="live-wp" controlsList="nodownload" controls autoplay loop muted playsinline poster="${img}">
      <source src="${video}" type="video/mp4" />
      Your browser does not support the video tag.
    </video>
  </div>
</div>`;
  }

  const html = `
<h1>${title}</h1>
${includeMeta ? `<meta name="description" content="${desc}" />` : ''}
${includeKeywords ? `<meta name="keywords" content="${topicDetails.keywords}, gái xinh, ${country}" />` : ''}

<div class="separator" style="clear: both;">
  <a href="${img}" style="display: block; padding: 1em 0px; text-align: center;">
    <img alt="${subject}" border="0" height="400" src="${img}" style="border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.3);" />
  </a>
</div>

${videoSection}

<div class="content-wrapper" style="line-height: 1.8; font-size: 16px; margin: 30px 0;">
  ${content.replace(/\n/g,'<br><br>')}
</div>

${hashtags}

${socialButtons}

${video ? `
<div class="text-center">
  <a alt="Download Video" class="btnlook download-wall" href="${video}" style="color: #e74c3c;" title="Download Video" download>
    📥 Download Video
  </a>
</div>
` : ''}

<div class="related-content" style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 30px 0;">
  <h3>🔗 Có thể bạn quan tâm:</h3>
  <ul>
    <li><a href="#">Bộ sưu tập ảnh gái xinh ${country} mới nhất</a></li>
    <li><a href="#">Top ${topicDetails.name} hot nhất tháng</a></li>
    <li><a href="#">Xu hướng thời trang ${country} 2024</a></li>
  </ul>
</div>
    `.trim();

  document.getElementById('resultHTML').value = html;
  alert('✅ Tạo bài viết thành công!');
}

function copyResult() {
  const textarea = document.getElementById('resultHTML');
  if (!textarea.value) {
    alert('❌ Chưa có nội dung để sao chép!');
    return;
  }
  textarea.select();
  document.execCommand('copy');
  alert('✅ Đã sao chép HTML vào clipboard!');
}

function previewResult() {
  const html = document.getElementById('resultHTML').value;
  if (!html) {
    alert('❌ Chưa có nội dung để xem trước!');
    return;
  }
  
  const previewWindow = window.open('', '_blank', 'width=800,height=600');
  previewWindow.document.write(`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="UTF-8">
      <title>Xem trước bài viết</title>
      <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 20px auto; padding: 20px; line-height: 1.6; }
        img { max-width: 100%; height: auto; }
        .separator { text-align: center; margin: 20px 0; }
        .content-wrapper { margin: 20px 0; }
        .related-content { background: #f8f9fa; padding: 20px; border-radius: 10px; }
        .text-center { text-align: center; margin: 20px 0; }
        .btnlook.download-wall { padding: 10px 20px; border: 2px solid #e74c3c; color: #e74c3c; text-decoration: none; border-radius: 5px; }
        .social-share a { margin: 0 10px; padding: 10px 15px; color: white; text-decoration: none; border-radius: 5px; }
      </style>

```
</head>
<body>${html}</body>
</html>
```

`);
previewWindow.document.close();
}

function downloadHTML() {
const html = document.getElementById(‘resultHTML’).value;
if (!html) {
alert(‘❌ Chưa có nội dung để tải về!’);
return;
}

const fullHTML = `<!DOCTYPE html>

<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bài viết gái xinh</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 800px; margin: 20px auto; padding: 20px; line-height: 1.6; }
    img { max-width: 100%; height: auto; }
    .separator { text-align: center; margin: 20px 0; }
    .content-wrapper { margin: 20px 0; }
    .related-content { background: #f8f9fa; padding: 20px; border-radius: 10px; }
    .text-center { text-align: center; margin: 20px 0; }
    .btnlook.download-wall { padding: 10px 20px; border: 2px solid #e74c3c; color: #e74c3c; text-decoration: none; border-radius: 5px; }
    .social-share a { margin: 0 10px; padding: 10px 15px; color: white; text-decoration: none; border-radius: 5px; }
  </style>
</head>
<body>
${html}
</body>
</html>`;

const blob = new Blob([fullHTML], { type: ‘text/html’ });
const url = URL.createObjectURL(blob);
const a = document.createElement(‘a’);
a.href = url;
a.download = ‘bai-viet-gai-xinh.html’;
document.body.appendChild(a);
a.click();
document.body.removeChild(a);
URL.revokeObjectURL(url);
alert(‘✅ Đã tải file HTML về máy!’);
}

// Add some animation effects
document.addEventListener(‘DOMContentLoaded’, function() {
// Animate feature cards on load
const cards = document.querySelectorAll(’.feature-card’);
cards.forEach((card, index) => {
card.style.opacity = ‘0’;
card.style.transform = ‘translateY(20px)’;
setTimeout(() => {
card.style.transition = ‘all 0.5s ease’;
card.style.opacity = ‘1’;
card.style.transform = ‘translateY(0)’;
}, index * 200);
});

// Add hover effects to buttons
const buttons = document.querySelectorAll(‘button’);
buttons.forEach(button => {
button.addEventListener(‘mouseenter’, function() {
this.style.transform = ‘translateY(-2px)’;
});
button.addEventListener(‘mouseleave’, function() {
this.style.transform = ‘translateY(0)’;
});
});
});

// Add keyboard shortcuts
document.addEventListener(‘keydown’, function(e) {
if (e.ctrlKey || e.metaKey) {
switch(e.key) {
case ‘Enter’:
e.preventDefault();
generateArticleOpenAI();
break;
case ‘s’:
e.preventDefault();
copyResult();
break;
case ‘p’:
e.preventDefault();
previewResult();
break;
}
}
});
</script>

</body>
</html>
