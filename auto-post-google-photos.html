<!DOCTYPE html>

<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Tool táº¡o bÃ i viáº¿t gÃ¡i xinh nÃ¢ng cao + API OpenAI</title>
  <style>
    body { 
      font-family: 'Segoe UI', Arial, sans-serif; 
      max-width: 1000px; 
      margin: auto; 
      padding: 20px; 
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      min-height: 100vh;
    }
    .container {
      background: white;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }
    h2 { 
      text-align: center; 
      color: #2c3e50;
      margin-bottom: 30px;
      font-size: 28px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }
    .form-group {
      margin-bottom: 20px;
    }
    label { 
      font-weight: bold; 
      display: block; 
      margin-bottom: 8px;
      color: #34495e;
      font-size: 16px;
    }
    input[type=text], select, textarea {
      width: 100%; 
      padding: 12px; 
      border: 2px solid #e0e0e0; 
      border-radius: 8px;
      font-size: 14px;
      transition: border-color 0.3s ease;
    }
    input[type=text]:focus, select:focus, textarea:focus {
      border-color: #3498db;
      outline: none;
      box-shadow: 0 0 10px rgba(52, 152, 219, 0.3);
    }
    textarea { 
      height: 200px; 
      font-family: 'Consolas', monospace; 
      resize: vertical; 
    }
    .btn-group {
      display: flex;
      gap: 15px;
      margin: 20px 0;
      flex-wrap: wrap;
    }
    button {
      padding: 12px 25px; 
      font-weight: bold;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white; 
      border: none; 
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      transition: all 0.3s ease;
      flex: 1;
      min-width: 200px;
    }
    button:hover { 
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    .btn-secondary {
      background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
    }
    .dropzone {
      border: 3px dashed #bdc3c7; 
      border-radius: 15px; 
      padding: 40px;
      text-align: center; 
      color: #7f8c8d; 
      cursor: pointer; 
      transition: all 0.3s ease;
      background: #f8f9fa;
    }
    .dropzone.dragover { 
      border-color: #3498db; 
      color: #2c3e50; 
      background: #e3f2fd;
      transform: scale(1.02);
    }
    .image-preview { 
      margin: 20px 0; 
      text-align: center; 
    }
    .image-preview img { 
      max-width: 100%; 
      max-height: 400px;
      border-radius: 10px; 
      box-shadow: 0 8px 25px rgba(0,0,0,0.15); 
    }
    .loading-modal {
      background-color: rgba(0,0,0,0.8);
      display: none; 
      position: fixed; 
      z-index: 10000;
      top: 0; 
      left: 0; 
      height: 100%; 
      width: 100%;
    }
    .loading-modal.show {
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .loading-content {
      background: white;
      padding: 40px;
      border-radius: 15px;
      text-align: center;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }
    .loading-spinner {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #3498db;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
      margin: 0 auto 20px;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    .loading-text {
      font-size: 18px; 
      color: #2c3e50; 
      font-weight: bold;
    }
    .text-center { 
      text-align: center; 
      margin: 20px 0; 
    }
    .btnlook.download-wall {
      padding: 15px 25px;
      border: 2px solid #e74c3c;
      border-radius: 8px;
      text-decoration: none;
      font-weight: bold;
      display: inline-block;
      color: #e74c3c;
      transition: all 0.3s ease;
    }
    .btnlook.download-wall:hover {
      background-color: #e74c3c;
      color: white;
      transform: translateY(-2px);
    }
    .topic-category {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 10px;
      margin: 10px 0;
    }
    .topic-category h4 {
      margin: 0 0 10px 0;
      color: #2c3e50;
      font-size: 16px;
    }
    .features-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    .feature-card {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
    }
    .advanced-options {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 10px;
      margin: 20px 0;
    }
    .checkbox-group {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 10px;
      margin: 15px 0;
    }
    .checkbox-item {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .checkbox-item input[type="checkbox"] {
      width: auto;
      margin: 0;
    }
  </style>
</head>
<body>

<div class="container">
  <h2>ğŸŒŸ Tool Táº¡o BÃ i Viáº¿t GÃ¡i Xinh NÃ¢ng Cao + AI</h2>

  <div class="features-grid">
    <div class="feature-card">
      <h3>ğŸ“± Social Media</h3>
      <p>Facebook, Instagram, Twitter, TikTok</p>
    </div>
    <div class="feature-card">
      <h3>ğŸŒ Äa Quá»‘c Gia</h3>
      <p>Viá»‡t Nam, ChÃ¢u Ã‚u, Nháº­t Báº£n, Má»¹</p>
    </div>
    <div class="feature-card">
      <h3>ğŸ¨ Äa Dáº¡ng Chá»§ Äá»</h3>
      <p>Bikini, Cosplay, Ão dÃ i, Cute</p>
    </div>
  </div>

  <div class="form-group">
    <label>ğŸ“¸ Upload áº£nh thumbnail (Imgur):</label>
    <div class="dropzone" id="dropzone">
      <div>ğŸ–¼ï¸ KÃ©o áº£nh vÃ o Ä‘Ã¢y hoáº·c click Ä‘á»ƒ chá»n</div>
      <small>Há»— trá»£: JPG, PNG, GIF (Max: 10MB)</small>
    </div>
    <div class="image-preview" id="imagePreview"></div>
    <input type="hidden" id="imgurLink" />
  </div>

  <div class="form-group">
    <label>ğŸ¬ Nháº­p link video MP4 (tÃ¹y chá»n):</label>
    <input type="text" id="videoLink" placeholder="https://example.com/video.mp4 (Ä‘á»ƒ trá»‘ng náº¿u chá»‰ cÃ³ áº£nh)" />
  </div>

  <div class="form-group">
    <label>ğŸ§â€â™€ï¸ TÃªn nhÃ¢n váº­t (tÃ¹y chá»n):</label>
    <input type="text" id="characterName" placeholder="VÃ­ dá»¥: Ngá»c Trinh, Arisa, Lisa, hoáº·c Ä‘á»ƒ trá»‘ng..." />
  </div>

  <div class="form-group">
    <label>ğŸŒ Chá»n quá»‘c gia/khu vá»±c:</label>
    <select id="country">
      <option value="Viá»‡t Nam">ğŸ‡»ğŸ‡³ Viá»‡t Nam</option>
      <option value="Nháº­t Báº£n">ğŸ‡¯ğŸ‡µ Nháº­t Báº£n</option>
      <option value="HÃ n Quá»‘c">ğŸ‡°ğŸ‡· HÃ n Quá»‘c</option>
      <option value="Trung Quá»‘c">ğŸ‡¨ğŸ‡³ Trung Quá»‘c</option>
      <option value="ThÃ¡i Lan">ğŸ‡¹ğŸ‡­ ThÃ¡i Lan</option>
      <option value="ChÃ¢u Ã‚u">ğŸ‡ªğŸ‡º ChÃ¢u Ã‚u</option>
      <option value="Má»¹">ğŸ‡ºğŸ‡¸ Má»¹</option>
      <option value="Quá»‘c táº¿">ğŸŒ Quá»‘c táº¿</option>
    </select>
  </div>

  <div class="form-group">
    <label>ğŸ“š Chá»n chá»§ Ä‘á» chi tiáº¿t:</label>
    <select id="topic">
      <optgroup label="ğŸ“± Social Media">
        <option value="facebook">GÃ¡i xinh Facebook</option>
        <option value="instagram">GÃ¡i xinh Instagram</option>
        <option value="twitter">GÃ¡i xinh Twitter</option>
        <option value="tiktok">GÃ¡i xinh TikTok</option>
      </optgroup>

```
  <optgroup label="ğŸŒ Theo khu vá»±c">
    <option value="gaixinh-vn">áº¢nh GÃ¡i Xinh VN</option>
    <option value="gaixinh-chauau">áº¢nh GÃ¡i Xinh ChÃ¢u Ã‚u Má»¹</option>
    <option value="gaixinh-nhat">áº¢nh GÃ¡i Nháº­t Xinh Äáº¹p</option>
    <option value="gaixinh-chauau-hinh">HÃ¬nh áº¢nh GÃ¡i Xinh ChÃ¢u Ã‚u</option>
  </optgroup>
  
  <optgroup label="ğŸ¨ Phong cÃ¡ch & Trang phá»¥c">
    <option value="gaixinh-tocngan">GÃ¡i Xinh TÃ³c Ngáº¯n</option>
    <option value="gaixinh-bikini">GÃ¡i Xinh Máº·c Bikini</option>
    <option value="gaixinh-aodai">GÃ¡i Xinh Máº·c Ão DÃ i Viá»‡t Nam</option>
    <option value="gaixinh-cute">áº¢nh GÃ¡i Xinh Cute</option>
    <option value="gaixinh-cosplay">áº¢nh GÃ¡i Cosplay</option>
  </optgroup>
  
  <optgroup label="ğŸ¯ Äá»™ tuá»•i & NhÃ³m">
    <option value="gaixinh-cap3">GÃ¡i Xinh Cáº¥p 3</option>
    <option value="gaixinh-hocsinh">GÃ¡i Xinh Há»c Sinh</option>
    <option value="gaixinh-sinhvien">GÃ¡i Xinh Sinh ViÃªn</option>
  </optgroup>
  
  <optgroup label="ğŸ“ Bá»™ sÆ°u táº­p">
    <option value="bosuutap-gaixinh">Bá»™ SÆ°u Táº­p áº¢nh GÃ¡i Xinh</option>
    <option value="hinhnengaixinh">Bá»™ SÆ°u Táº­p HÃ¬nh Ná»n GÃ¡i Xinh</option>
    <option value="album-gaixinh">Album áº¢nh GÃ¡i Xinh</option>
  </optgroup>
  
  <optgroup label="ğŸ­ Chá»§ Ä‘á» khÃ¡c">
    <option value="hotgirl">Hot Girl</option>
    <option value="dienvien">Diá»…n ViÃªn</option>
    <option value="nguoimau">NgÆ°á»i Máº«u</option>
    <option value="idol">Idol</option>
    <option value="influencer">NgÆ°á»i Ná»•i Tiáº¿ng</option>
  </optgroup>
</select>
```

  </div>

  <div class="form-group">
    <label>âœï¸ Phong cÃ¡ch viáº¿t bÃ i:</label>
    <select id="style">
      <option value="goi-cam">Gá»£i cáº£m, quyáº¿n rÅ©</option>
      <option value="nhe-nhang">Nháº¹ nhÃ ng, giá»›i thiá»‡u cÃ¡ nhÃ¢n</option>
      <option value="seo-friendly">SEO thÃ¢n thiá»‡n</option>
      <option value="viral">Thu hÃºt tÆ°Æ¡ng tÃ¡c</option>
      <option value="chuyen-nghiep">ChuyÃªn nghiá»‡p</option>
    </select>
  </div>

  <div class="advanced-options">
    <h4>ğŸ”§ TÃ¹y chá»n nÃ¢ng cao:</h4>
    <div class="checkbox-group">
      <div class="checkbox-item">
        <input type="checkbox" id="includeHashtags" checked>
        <label for="includeHashtags">ThÃªm hashtags</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="includeMeta" checked>
        <label for="includeMeta">ThÃªm meta description</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="includeKeywords">
        <label for="includeKeywords">Tá»‘i Æ°u tá»« khÃ³a</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="includeSocial">
        <label for="includeSocial">NÃºt chia sáº» máº¡ng xÃ£ há»™i</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="includeRelated">
        <label for="includeRelated">BÃ i viáº¿t liÃªn quan</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="includeComment">
        <label for="includeComment">Khung bÃ¬nh luáº­n</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="includeRating">
        <label for="includeRating">Há»‡ thá»‘ng Ä‘Ã¡nh giÃ¡</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="includeGallery">
        <label for="includeGallery">Gallery áº£nh</label>
      </div>
    </div>

```
<div class="form-group" style="margin-top: 15px;">
  <label>ğŸ¨ MÃ u chá»§ Ä‘áº¡o:</label>
  <select id="colorTheme">
    <option value="blue">Xanh dÆ°Æ¡ng (ChuyÃªn nghiá»‡p)</option>
    <option value="pink">Há»“ng (Ná»¯ tÃ­nh)</option>
    <option value="purple">TÃ­m (Sang trá»ng)</option>
    <option value="red">Äá» (Ná»•i báº­t)</option>
    <option value="green">Xanh lÃ¡ (Tá»± nhiÃªn)</option>
    <option value="dark">Tá»‘i (Hiá»‡n Ä‘áº¡i)</option>
  </select>
</div>
```

  </div>

  <div class="form-group">
    <label>ğŸ¨ Chá»n template bÃ i viáº¿t cÃ³ sáºµn:</label>
    <select id="templateSelect" onchange="loadTemplate()">
      <option value="">-- Chá»n template --</option>
      <option value="viral-social">ğŸ”¥ Template Viral Social Media</option>
      <option value="seo-blog">ğŸ“ˆ Template SEO Blog</option>
      <option value="collection">ğŸ“ Template Bá»™ SÆ°u Táº­p</option>
      <option value="review">â­ Template Review/ÄÃ¡nh GiÃ¡</option>
      <option value="trend">ğŸ“Š Template Xu HÆ°á»›ng</option>
      <option value="comparison">âš–ï¸ Template So SÃ¡nh</option>
    </select>
  </div>

  <div class="form-group">
    <label>ğŸ“ Äá»™ dÃ i bÃ i viáº¿t:</label>
    <select id="articleLength">
      <option value="short">Ngáº¯n (200-300 tá»«)</option>
      <option value="medium" selected>Trung bÃ¬nh (400-600 tá»«)</option>
      <option value="long">DÃ i (700-1000 tá»«)</option>
      <option value="detailed">Chi tiáº¿t (1000+ tá»«)</option>
    </select>
  </div>

  <div class="form-group">
    <label>ğŸ¯ Äá»‘i tÆ°á»£ng Ä‘á»™c giáº£:</label>
    <select id="targetAudience">
      <option value="general">Tá»•ng quÃ¡t</option>
      <option value="young">Giá»›i tráº» (18-25)</option>
      <option value="adult">NgÆ°á»i trÆ°á»Ÿng thÃ nh (25-35)</option>
      <option value="photography">YÃªu thÃ­ch nhiáº¿p áº£nh</option>
      <option value="fashion">Quan tÃ¢m thá»i trang</option>
      <option value="social-media">NgÆ°á»i dÃ¹ng máº¡ng xÃ£ há»™i</option>
    </select>
  </div>

  <div class="btn-group">
    <button onclick="generateArticleOpenAI()">ğŸ¤– Táº¡o bÃ i viáº¿t AI</button>
    <button class="btn-secondary" onclick="generateTemplate()">ğŸ“‹ Táº¡o template nhanh</button>
    <button class="btn-secondary" onclick="generateMultiple()">ğŸ”„ Táº¡o nhiá»u phiÃªn báº£n</button>
  </div>

  <div class="form-group">
    <label>Káº¿t quáº£ bÃ i viáº¿t (HTML Ä‘áº§y Ä‘á»§):</label>
    <textarea id="resultHTML" readonly placeholder="Káº¿t quáº£ sáº½ hiá»ƒn thá»‹ táº¡i Ä‘Ã¢y..."></textarea>
  </div>

  <div class="btn-group">
    <button class="btn-secondary" onclick="copyResult()">ğŸ“„ Sao chÃ©p HTML</button>
    <button class="btn-secondary" onclick="previewResult()">ğŸ‘ï¸ Xem trÆ°á»›c</button>
    <button class="btn-secondary" onclick="downloadHTML()">ğŸ’¾ Táº£i vá» HTML</button>
    <button class="btn-secondary" onclick="saveToHistory()">ğŸ’¾ LÆ°u vÃ o lá»‹ch sá»­</button>
  </div>

  <div class="form-group">
    <label>ğŸ“š Lá»‹ch sá»­ bÃ i viáº¿t:</label>
    <select id="historySelect" onchange="loadFromHistory()">
      <option value="">-- Chá»n tá»« lá»‹ch sá»­ --</option>
    </select>
    <button class="btn-secondary" onclick="clearHistory()" style="margin-top: 10px; width: 200px;">ğŸ—‘ï¸ XÃ³a lá»‹ch sá»­</button>
  </div>

  <div class="statistics" style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h4>ğŸ“Š Thá»‘ng kÃª bÃ i viáº¿t:</h4>
    <div id="stats">
      <p>Sá»‘ tá»«: <span id="wordCount">0</span></p>
      <p>Sá»‘ kÃ½ tá»±: <span id="charCount">0</span></p>
      <p>Thá»i gian Ä‘á»c Æ°á»›c tÃ­nh: <span id="readTime">0 phÃºt</span></p>
      <p>Äiá»ƒm SEO: <span id="seoScore">0/100</span></p>
    </div>
  </div>

</div>

<div class="loading-modal" id="loadingModal">
  <div class="loading-content">
    <div class="loading-spinner"></div>
    <div class="loading-text">Äang xá»­ lÃ½ AI...</div>
    <p>Vui lÃ²ng chá» trong giÃ¢y lÃ¡t</p>
  </div>
</div>

<script>
const clientId = '3a8be4390ef3eb8';
const dropzone = document.getElementById('dropzone');
const imagePreview = document.getElementById('imagePreview');
const imgurLinkInput = document.getElementById('imgurLink');

// Drag and drop functionality
dropzone.addEventListener('dragover', e => {
  e.preventDefault();
  dropzone.classList.add('dragover');
});
dropzone.addEventListener('dragleave', e => {
  dropzone.classList.remove('dragover');
});
dropzone.addEventListener('drop', e => {
  e.preventDefault();
  dropzone.classList.remove('dragover');
  if(e.dataTransfer.files.length) uploadFile(e.dataTransfer.files[0]);
});
dropzone.addEventListener('click', () => {
  const fileInput = document.createElement('input');
  fileInput.type = 'file';
  fileInput.accept = 'image/*';
  fileInput.onchange = () => {
    if(fileInput.files.length) uploadFile(fileInput.files[0]);
  };
  fileInput.click();
});

function uploadFile(file) {
  if(!file.type.startsWith('image/')) {
    alert('âŒ Vui lÃ²ng chá»n file áº£nh!');
    return;
  }
  if(file.size > 10 * 1024 * 1024) {
    alert('âŒ File quÃ¡ lá»›n! Vui lÃ²ng chá»n áº£nh dÆ°á»›i 10MB.');
    return;
  }
  
  showLoading(true);
  const formData = new FormData();
  formData.append('image', file);

  fetch('https://api.imgur.com/3/image', {
    method: 'POST',
    headers: { Authorization: 'Client-ID ' + clientId },
    body: formData
  })
  .then(res => res.json())
  .then(data => {
    showLoading(false);
    if(data.success) {
      const link = data.data.link;
      imgurLinkInput.value = link;
      imagePreview.innerHTML = `<img src="${link}" alt="Thumbnail">`;
      alert('âœ… Upload áº£nh thÃ nh cÃ´ng!');
    } else {
      alert('âŒ Upload áº£nh tháº¥t báº¡i!');
    }
  })
  .catch(() => {
    showLoading(false);
    alert('âŒ Lá»—i upload áº£nh!');
  });
}

function showLoading(show) {
  document.getElementById('loadingModal').classList.toggle('show', show);
}

function getTopicDetails(topic) {
  const topics = {
    'facebook': { name: 'Facebook', category: 'social media', keywords: 'facebook, social, gÃ¡i xinh fb' },
    'instagram': { name: 'Instagram', category: 'social media', keywords: 'instagram, insta, gÃ¡i xinh ig' },
    'twitter': { name: 'Twitter', category: 'social media', keywords: 'twitter, gÃ¡i xinh twitter' },
    'tiktok': { name: 'TikTok', category: 'social media', keywords: 'tiktok, video, gÃ¡i xinh tiktok' },
    'gaixinh-vn': { name: 'GÃ¡i Xinh Viá»‡t Nam', category: 'regional', keywords: 'gÃ¡i xinh viá»‡t nam, vn, vietnam' },
    'gaixinh-chauau': { name: 'GÃ¡i Xinh ChÃ¢u Ã‚u Má»¹', category: 'regional', keywords: 'gÃ¡i xinh chÃ¢u Ã¢u, má»¹, tÃ¢y' },
    'gaixinh-nhat': { name: 'GÃ¡i Xinh Nháº­t Báº£n', category: 'regional', keywords: 'gÃ¡i xinh nháº­t, japan, nháº­t báº£n' },
    'gaixinh-tocngan': { name: 'GÃ¡i Xinh TÃ³c Ngáº¯n', category: 'style', keywords: 'tÃ³c ngáº¯n, short hair, gÃ¡i xinh' },
    'gaixinh-bikini': { name: 'GÃ¡i Xinh Bikini', category: 'style', keywords: 'bikini, Ä‘á»“ bÆ¡i, gÃ¡i xinh' },
    'gaixinh-aodai': { name: 'GÃ¡i Xinh Ão DÃ i', category: 'style', keywords: 'Ã¡o dÃ i, truyá»n thá»‘ng, viá»‡t nam' },
    'gaixinh-cute': { name: 'GÃ¡i Xinh Cute', category: 'style', keywords: 'cute, dá»… thÆ°Æ¡ng, gÃ¡i xinh' },
    'gaixinh-cosplay': { name: 'GÃ¡i Cosplay', category: 'style', keywords: 'cosplay, anime, manga' },
    'bosuutap-gaixinh': { name: 'Bá»™ SÆ°u Táº­p GÃ¡i Xinh', category: 'collection', keywords: 'bá»™ sÆ°u táº­p, album, collection' },
    'hinhnengaixinh': { name: 'HÃ¬nh Ná»n GÃ¡i Xinh', category: 'collection', keywords: 'hÃ¬nh ná»n, wallpaper, background' }
  };
  return topics[topic] || { name: topic, category: 'general', keywords: topic };
}

async function generateArticleOpenAI() {
  const img = document.getElementById('imgurLink').value.trim();
  const video = document.getElementById('videoLink').value.trim();
  const name = document.getElementById('characterName').value.trim();
  const country = document.getElementById('country').value;
  const topic = document.getElementById('topic').value;
  const style = document.getElementById('style').value;

  if(!img) return alert('âŒ Vui lÃ²ng upload áº£nh trÆ°á»›c!');

  showLoading(true);
  
  const topicDetails = getTopicDetails(topic);
  const styleMap = {
    'goi-cam': 'gá»£i cáº£m, quyáº¿n rÅ©',
    'nhe-nhang': 'nháº¹ nhÃ ng, tinh táº¿',
    'seo-friendly': 'tá»‘i Æ°u SEO, chuyÃªn nghiá»‡p',
    'viral': 'thu hÃºt, viral',
    'chuyen-nghiep': 'chuyÃªn nghiá»‡p, trang trá»ng'
  };

  const prompt = `Viáº¿t má»™t bÃ i viáº¿t dÃ i, cuá»‘n hÃºt vá» ${name || 'cÃ´ gÃ¡i xinh Ä‘áº¹p'} á»Ÿ ${country} theo chá»§ Ä‘á» "${topicDetails.name}". 
  Phong cÃ¡ch: ${styleMap[style]}. 
  YÃªu cáº§u:
  - Tá»« 300-500 tá»«
  - MÃ´ táº£ sinh Ä‘á»™ng, háº¥p dáº«n
  - PhÃ¹ há»£p lÃ m bÃ i viáº¿t blog/website
  - TÃ­ch cá»±c, tÃ´n vinh váº» Ä‘áº¹p
  - KhÃ´ng ná»™i dung nháº¡y cáº£m
  Chá»‰ tráº£ vá» ná»™i dung bÃ i viáº¿t, khÃ´ng cáº§n tiÃªu Ä‘á».`;

  try {
    const response = await fetch('https://api.openai.com/v1/chat/completions', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': 'Bearer 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'
      },
      body: JSON.stringify({
        model: 'gpt-4o-mini',
        messages: [{ role: 'user', content: prompt }],
        max_tokens: 800,
        temperature: 0.8,
      }),
    });
    
    if (!response.ok) {
      const err = await response.json();
      throw new Error(err.error?.message || 'Lá»—i API OpenAI');
    }
    
    const data = await response.json();
    const aiText = data.choices[0].message.content;

    generateHTMLOutput(aiText, img, video, name, country, topicDetails);
    
  } catch(err) {
    alert('âŒ Lá»—i gá»i API OpenAI: ' + err.message);
  } finally {
    showLoading(false);
  }
}

function generateTemplate() {
  const img = document.getElementById('imgurLink').value.trim();
  const video = document.getElementById('videoLink').value.trim();
  const name = document.getElementById('characterName').value.trim();
  const country = document.getElementById('country').value;
  const topic = document.getElementById('topic').value;
  
  if(!img) return alert('âŒ Vui lÃ²ng upload áº£nh trÆ°á»›c!');
  
  const topicDetails = getTopicDetails(topic);
  const templateText = `KhÃ¡m phÃ¡ váº» Ä‘áº¹p tuyá»‡t vá»i cá»§a ${name || 'cÃ´ gÃ¡i xinh Ä‘áº¹p'} trong bá»™ áº£nh ${topicDetails.name} ${country} Ä‘ang gÃ¢y sá»‘t trÃªn máº¡ng xÃ£ há»™i. 

Vá»›i phong cÃ¡ch ${topicDetails.name.toLowerCase()}, ${name || 'cÃ´ áº¥y'} Ä‘Ã£ thu hÃºt hÃ ng ngÃ n lÆ°á»£t yÃªu thÃ­ch vÃ  bÃ¬nh luáº­n tá»« cá»™ng Ä‘á»“ng máº¡ng. Nhá»¯ng hÃ¬nh áº£nh Ä‘Æ°á»£c chá»¥p má»™t cÃ¡ch tinh táº¿, tÃ´n lÃªn váº» Ä‘áº¹p tá»± nhiÃªn vÃ  cuá»‘n hÃºt.

Bá»™ sÆ°u táº­p nÃ y khÃ´ng chá»‰ Ä‘Æ¡n thuáº§n lÃ  nhá»¯ng bá»©c áº£nh Ä‘áº¹p mÃ  cÃ²n thá»ƒ hiá»‡n phong cÃ¡ch thá»i trang hiá»‡n Ä‘áº¡i vÃ  xu hÆ°á»›ng Ä‘Æ°á»£c nhiá»u báº¡n tráº» yÃªu thÃ­ch hiá»‡n nay.`;

  generateHTMLOutput(templateText, img, video, name, country, topicDetails);
}

function generateHTMLOutput(content, img, video, name, country, topicDetails) {
  const includeHashtags = document.getElementById('includeHashtags').checked;
  const includeMeta = document.getElementById('includeMeta').checked;
  const includeKeywords = document.getElementById('includeKeywords').checked;
  const includeSocial = document.getElementById('includeSocial').checked;

  const subject = name || `${topicDetails.name} ${country}`;
  const title = `${subject} - ${topicDetails.name} ${country} Äáº¹p Nháº¥t`;
  const desc = `Xem ngay bá»™ áº£nh ${topicDetails.name} ${country} cá»§a ${subject} Ä‘ang viral trÃªn máº¡ng xÃ£ há»™i vá»›i hÃ ng ngÃ n lÆ°á»£t thÃ­ch.`;

  let hashtags = '';
  if (includeHashtags) {
    hashtags = `<p><strong>Hashtags:</strong> #${topicDetails.keywords.replace(/[, ]+/g, ' #')} #${country.replace(/\s+/g, '')} #viral</p>`;
  }

  let socialButtons = '';
  if (includeSocial) {
    socialButtons = `
    <div class="social-share" style="text-align: center; margin: 20px 0;">
      <h4>Chia sáº» bÃ i viáº¿t:</h4>
      <a href="https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}" target="_blank" style="margin: 0 10px; padding: 10px 15px; background: #4267B2; color: white; text-decoration: none; border-radius: 5px;">Facebook</a>
      <a href="https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}&text=${encodeURIComponent(title)}" target="_blank" style="margin: 0 10px; padding: 10px 15px; background: #1DA1F2; color: white; text-decoration: none; border-radius: 5px;">Twitter</a>
    </div>`;
  }

  let videoSection = '';
  if (video) {
    videoSection = `
<div style="display: none;">
  <div id="live-wallpaper">
    <video class="live-wp" controlsList="nodownload" controls autoplay loop muted playsinline poster="${img}">
      <source src="${video}" type="video/mp4" />
      Your browser does not support the video tag.
    </video>
  </div>
</div>`;
  }

  const html = `
<h1>${title}</h1>
${includeMeta ? `<meta name="description" content="${desc}" />` : ''}
${includeKeywords ? `<meta name="keywords" content="${topicDetails.keywords}, gÃ¡i xinh, ${country}" />` : ''}

<div class="separator" style="clear: both;">
  <a href="${img}" style="display: block; padding: 1em 0px; text-align: center;">
    <img alt="${subject}" border="0" height="400" src="${img}" style="border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.3);" />
  </a>
</div>

${videoSection}

<div class="content-wrapper" style="line-height: 1.8; font-size: 16px; margin: 30px 0;">
  ${content.replace(/\n/g,'<br><br>')}
</div>

${hashtags}

${socialButtons}

${video ? `
<div class="text-center">
  <a alt="Download Video" class="btnlook download-wall" href="${video}" style="color: #e74c3c;" title="Download Video" download>
    ğŸ“¥ Download Video
  </a>
</div>
` : ''}

<div class="related-content" style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 30px 0;">
  <h3>ğŸ”— CÃ³ thá»ƒ báº¡n quan tÃ¢m:</h3>
  <ul>
    <li><a href="#">Bá»™ sÆ°u táº­p áº£nh gÃ¡i xinh ${country} má»›i nháº¥t</a></li>
    <li><a href="#">Top ${topicDetails.name} hot nháº¥t thÃ¡ng</a></li>
    <li><a href="#">Xu hÆ°á»›ng thá»i trang ${country} 2024</a></li>
  </ul>
</div>
    `.trim();

  document.getElementById('resultHTML').value = html;
  alert('âœ… Táº¡o bÃ i viáº¿t thÃ nh cÃ´ng!');
}

function copyResult() {
  const textarea = document.getElementById('resultHTML');
  if (!textarea.value) {
    alert('âŒ ChÆ°a cÃ³ ná»™i dung Ä‘á»ƒ sao chÃ©p!');
    return;
  }
  textarea.select();
  document.execCommand('copy');
  alert('âœ… ÄÃ£ sao chÃ©p HTML vÃ o clipboard!');
}

function previewResult() {
  const html = document.getElementById('resultHTML').value;
  if (!html) {
    alert('âŒ ChÆ°a cÃ³ ná»™i dung Ä‘á»ƒ xem trÆ°á»›c!');
    return;
  }
  
  const previewWindow = window.open('', '_blank', 'width=800,height=600');
  previewWindow.document.write(`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="UTF-8">
      <title>Xem trÆ°á»›c bÃ i viáº¿t</title>
      <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 20px auto; padding: 20px; line-height: 1.6; }
        img { max-width: 100%; height: auto; }
        .separator { text-align: center; margin: 20px 0; }
        .content-wrapper { margin: 20px 0; }
        .related-content { background: #f8f9fa; padding: 20px; border-radius: 10px; }
        .text-center { text-align: center; margin: 20px 0; }
        .btnlook.download-wall { padding: 10px 20px; border: 2px solid #e74c3c; color: #e74c3c; text-decoration: none; border-radius: 5px; }
        .social-share a { margin: 0 10px; padding: 10px 15px; color: white; text-decoration: none; border-radius: 5px; }
      </style>

```
</head>
<body>${html}</body>
</html>
```

`);
previewWindow.document.close();
}

function downloadHTML() {
const html = document.getElementById(â€˜resultHTMLâ€™).value;
if (!html) {
alert(â€˜âŒ ChÆ°a cÃ³ ná»™i dung Ä‘á»ƒ táº£i vá»!â€™);
return;
}

const fullHTML = `<!DOCTYPE html>

<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BÃ i viáº¿t gÃ¡i xinh</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 800px; margin: 20px auto; padding: 20px; line-height: 1.6; }
    img { max-width: 100%; height: auto; }
    .separator { text-align: center; margin: 20px 0; }
    .content-wrapper { margin: 20px 0; }
    .related-content { background: #f8f9fa; padding: 20px; border-radius: 10px; }
    .text-center { text-align: center; margin: 20px 0; }
    .btnlook.download-wall { padding: 10px 20px; border: 2px solid #e74c3c; color: #e74c3c; text-decoration: none; border-radius: 5px; }
    .social-share a { margin: 0 10px; padding: 10px 15px; color: white; text-decoration: none; border-radius: 5px; }
  </style>
</head>
<body>
${html}
</body>
</html>`;

const blob = new Blob([fullHTML], { type: â€˜text/htmlâ€™ });
const url = URL.createObjectURL(blob);
const a = document.createElement(â€˜aâ€™);
a.href = url;
a.download = â€˜bai-viet-gai-xinh.htmlâ€™;
document.body.appendChild(a);
a.click();
document.body.removeChild(a);
URL.revokeObjectURL(url);
alert(â€˜âœ… ÄÃ£ táº£i file HTML vá» mÃ¡y!â€™);
}

// Add some animation effects
document.addEventListener(â€˜DOMContentLoadedâ€™, function() {
// Animate feature cards on load
const cards = document.querySelectorAll(â€™.feature-cardâ€™);
cards.forEach((card, index) => {
card.style.opacity = â€˜0â€™;
card.style.transform = â€˜translateY(20px)â€™;
setTimeout(() => {
card.style.transition = â€˜all 0.5s easeâ€™;
card.style.opacity = â€˜1â€™;
card.style.transform = â€˜translateY(0)â€™;
}, index * 200);
});

// Add hover effects to buttons
const buttons = document.querySelectorAll(â€˜buttonâ€™);
buttons.forEach(button => {
button.addEventListener(â€˜mouseenterâ€™, function() {
this.style.transform = â€˜translateY(-2px)â€™;
});
button.addEventListener(â€˜mouseleaveâ€™, function() {
this.style.transform = â€˜translateY(0)â€™;
});
});
});

// Add keyboard shortcuts
document.addEventListener(â€˜keydownâ€™, function(e) {
if (e.ctrlKey || e.metaKey) {
switch(e.key) {
case â€˜Enterâ€™:
e.preventDefault();
generateArticleOpenAI();
break;
case â€˜sâ€™:
e.preventDefault();
copyResult();
break;
case â€˜pâ€™:
e.preventDefault();
previewResult();
break;
}
}
});
</script>

</body>
</html>
