<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Tool tạo bài viết girlxinh - Chuẩn SEO Blogger (fix lỗi + LSI + Schema)</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 980px; margin: auto; padding: 20px; }
    h2 { text-align: center; }
    label { font-weight: bold; display: block; margin-top: 15px; }
    input[type=text], select, textarea {
      width: 100%; padding: 8px; margin-top: 5px;
      border: 1px solid #ccc; border-radius: 6px;
    }
    textarea { height: 220px; font-family: monospace; resize: vertical; }
    button {
      margin-top: 15px; padding: 10px 20px; font-weight: bold;
      background-color: #007bff; color: #fff; border: none; border-radius: 6px;
      cursor: pointer;
    }
    button:hover { background-color: #0056b3; }
    .dropzone {
      border: 2px dashed #999; border-radius: 10px; padding: 30px;
      text-align: center; color: #666; cursor: pointer; margin-top: 15px;
    }
    .dropzone.dragover { border-color: #333; color: #000; }
    .image-preview { margin-top: 15px; text-align: center; }
    .image-preview img { max-width: 100%; border-radius: 6px; box-shadow: 0 0 8px rgba(0,0,0,0.1); }
    .loading-modal {
      background-color: rgba(255,255,255,.8);
      display: none; position: fixed; z-index: 10000; inset: 0;
    }
    .loading-modal.show { display: block; }
    .loading-modal .loading-text {
      position: absolute; top: 45%; left: 50%; transform: translate(-50%, -50%);
      font-size: 20px; color: #333; font-weight: bold;
    }
    .language-selector { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 10px; border-radius: 10px; margin-bottom: 10px; color: #fff; }
    .language-selector select { background: #fff; font-weight: bold; }
    .tips { font-size: 12px; color: #555; }
  </style>
</head>
<body>

<h2>🎥 Tool tạo bài viết girlxinh - Đa ngôn ngữ · Chuẩn SEO Blogger</h2>
<p class="tips">Bản đã <b>fix lỗi</b> (sai chính tả value chủ đề, slug Unicode), bổ sung <b>LSI keyword</b>, <b>Schema Article + VideoObject</b>, <b>internal link</b>, lazy-load hình, và bảo vệ chính sách nội dung.</p>

<div class="language-selector">
  <label style="margin-bottom: 5px;">🌍 Chọn ngôn ngữ bài viết:</label>
  <select id="language">
    <option value="vi">🇻🇳 Tiếng Việt</option>
    <option value="en">🇺🇸 English</option>
  </select>
</div>

<label>📸 Upload ảnh thumbnail (Imgur):</label>
<div class="dropzone" id="dropzone">Kéo ảnh vào đây hoặc click để chọn</div>
<div class="image-preview" id="imagePreview"></div>
<input type="hidden" id="imgurLink" />

<label>🎬 Nhập link video MP4:</label>
<input type="text" id="videoLink" placeholder="https://example.com/video.mp4" />

<label>🧙‍♀️ Tên nhân vật (có thể để trống):</label>
<input type="text" id="characterName" placeholder="Ví dụ: Ngọc Trinh, Arisa, Lisa..." />

<label>🌍 Chọn quốc gia:</label>
<select id="country">
  <option value="Việt Nam">Việt Nam</option>
  <option value="Nhật Bản">Nhật Bản</option>
  <option value="Hàn Quốc">Hàn Quốc</option>
  <option value="Trung Quốc">Trung Quốc</option>
  <option value="Thái Lan">Thái Lan</option>
  <option value="Mỹ">Mỹ</option>
</select>

<label>📚 Chọn chủ đề bài viết:</label>
<select id="topic">
  <option value="hotgirl">Hot girl</option>
  <option value="tiktok">TikTok girl</option>
  <option value="dienvien">Diễn viên</option>
  <option value="nguoimau">Người mẫu</option>
  <option value="idol">Idol</option>
  <option value="influencer">Người nổi tiếng</option>
  <option value="facebook">Gái xinh Facebook</option>
  <option value="instagram">Gái xinh Instagram</option>
  <option value="twitter">Gái xinh Twitter</option>
  <option value="gaixinh-vn">Ảnh Gái Xinh VN</option>
  <option value="gaixinh-chauau">Ảnh gái xinh Châu Âu Mỹ</option>
  <option value="bosuutap">Bộ Sưu Tập Ảnh Gái Xinh</option>
  <option value="gaixinh-nhat">Ảnh gái Nhật xinh đẹp</option>
  <option value="gaixinh-europe">Hình ảnh gái xinh Châu Âu</option>
  <option value="tocngan">Gái Xinh Tóc Ngắn</option>
  <option value="hinhnen">Bộ sưu tập hình nền gái xinh</option>
  <option value="bikini">Gái xinh mặc bikini</option>
  <option value="aodai">Gái xinh mặc áo dài Việt Nam</option>
  <option value="cute">Ảnh Gái Xinh Cute</option>
  <option value="cosplay">Ảnh gái cosplay</option>
</select>
<p class="tips">Đã loại bỏ mục nhạy cảm để đảm bảo an toàn và tuân thủ chính sách.</p>

<label>✏️ Phong cách viết bài:</label>
<select id="style">
  <option value="goi-cam">Gợi cảm, quyến rũ</option>
  <option value="nhe-nhang">Nhẹ nhàng, giới thiệu cá nhân</option>
  <option value="thoi-trang">Thời trang, phong cách</option>
  <option value="tai-nang">Tài năng, kỹ năng</option>
  <option value="doi-thuong">Đời thường, gần gũi</option>
  <option value="nghe-thuat">Nghệ thuật, sáng tạo</option>
</select>

<button onclick="generateArticle()">📝 Tạo bài viết</button>

<label>Kết quả bài viết (HTML đầy đủ để dán vào Blogger):</label>
<textarea id="resultHTML" readonly></textarea>

<button onclick="copyResult()">📄 Sao chép HTML</button>

<div class="loading-modal" id="loadingModal"><div class="loading-text">Đang xử lý...</div></div>

<script>
const clientId = '3a8be4390ef3eb8';
const dropzone = document.getElementById('dropzone');
const imagePreview = document.getElementById('imagePreview');
const imgurLinkInput = document.getElementById('imgurLink');

// ====== TEMPLATE NỘI DUNG (fix key hinhnen) ======
const contentTemplates = {
  vi: {
    countries: {
      "Việt Nam": "việt nam",
      "Nhật Bản": "nhật bản",
      "Hàn Quốc": "hàn quốc",
      "Trung Quốc": "trung quốc",
      "Thái Lan": "thái lan",
      "Mỹ": "mỹ"
    },
    topics: {
      facebook: "Facebook",
      instagram: "Instagram",
      twitter: "Twitter",
      tiktok: "TikTok",
      "gaixinh-vn": "gái xinh Việt Nam",
      "gaixinh-chauau": "gái xinh Châu Âu Mỹ",
      bosuutap: "bộ sưu tập ảnh gái xinh",
      "gaixinh-nhat": "gái Nhật xinh đẹp",
      "gaixinh-europe": "gái xinh Châu Âu",
      tocngan: "gái xinh tóc ngắn",
      hinhnen: "hình nền gái xinh",
      bikini: "gái xinh bikini",
      aodai: "gái xinh áo dài",
      cute: "gái xinh cute",
      cosplay: "gái cosplay",
      hotgirl: "hot girl",
      dienvien: "diễn viên",
      nguoimau: "người mẫu",
      idol: "idol",
      influencer: "influencer"
    },
    topicContent: {
      instagram: {
        intro: "Story Instagram của {subject} đang gây sốt với độ hot không thể chối từ.",
        body: "{subject} thường xuyên chia sẻ những khoảnh khắc đẹp nhất. Với ảnh chụp nghệ thuật và caption ý nghĩa, mỗi post đều thành trend.",
        outro: "Theo dõi Instagram để cập nhật ảnh mới nhất của {subject}!"
      },
      aodai: {
        intro: "Hình ảnh {subject} trong tà áo dài truyền thống tôn vẻ đẹp dịu dàng, thùy mị.",
        body: "Áo dài là biểu tượng của vẻ đẹp Việt. {subject} tỏa sáng với nét đẹp thuần khiết và duyên dáng.",
        outro: "Vẻ đẹp truyền thống Việt Nam qua bộ ảnh của {subject}."
      },
      cosplay: {
        intro: "Bộ ảnh cosplay của {subject} tái hiện nhân vật anime/game sáng tạo và chỉn chu.",
        body: "Từ trang phục, make-up đến thần thái đều được đầu tư kỹ, mang lại cảm giác nhân vật sống động.",
        outro: "Một bộ cosplay chất lượng không thể bỏ qua của {subject}."
      }
    },
    'goi-cam': {
      intros: [
        `Video nóng bỏng, quyến rũ của {subject} khiến người xem không thể rời mắt.`,
        `{subject} xuất hiện đầy mê hoặc, khoe dáng chuẩn và thần thái thu hút.`
      ],
      bodies: [
        `Với đường cong cuốn hút, {subject} mê hoặc qua từng chuyển động uyển chuyển và ánh mắt.`,
        `Các khung hình được chăm chút, tôn lên vẻ đẹp bốc lửa và cá tính riêng của {subject}.`
      ],
      outros: [
        `Nếu bạn yêu thích vẻ đẹp gợi cảm, đừng bỏ qua clip này.`,
        `Video thu hút hàng nghìn lượt xem và chia sẻ chỉ sau vài giờ.`
      ]
    },
    'nhe-nhang': {
      intros: [
        `Clip nhẹ nhàng, gần gũi của {subject} mang lại cảm giác thư thái.`,
        `Đoạn video chân thật ghi lại khoảnh khắc đời thường của {subject}.`
      ],
      bodies: [
        `{subject} ghi điểm nhờ phong cách tự nhiên, giản dị.`,
        `Nụ cười tỏa nắng và ánh mắt chân thành là điểm nhấn của {subject}.`
      ],
      outros: [
        `Nếu bạn yêu sự chân thật, hãy xem video này.`,
        `Video nhận nhiều lời khen vì sự gần gũi và tự nhiên.`
      ]
    }
  },
  en: {
    countries: {
      "Việt Nam": "vietnamese",
      "Nhật Bản": "japanese",
      "Hàn Quốc": "korean",
      "Trung Quốc": "chinese",
      "Thái Lan": "thai",
      "Mỹ": "american"
    },
    topics: {
      facebook: "Facebook",
      instagram: "Instagram",
      twitter: "Twitter",
      tiktok: "TikTok",
      "gaixinh-vn": "Vietnamese beautiful girl",
      "gaixinh-chauau": "European American beautiful girl",
      bosuutap: "beautiful girl photo collection",
      "gaixinh-nhat": "beautiful Japanese girl",
      "gaixinh-europe": "European beautiful girl",
      tocngan: "short hair beautiful girl",
      hinhnen: "beautiful girl wallpaper",
      bikini: "bikini girl",
      aodai: "ao dai girl",
      cute: "cute girl",
      cosplay: "cosplay girl",
      hotgirl: "hot girl",
      dienvien: "actress",
      nguoimau: "model",
      idol: "idol",
      influencer: "influencer"
    }
  }
};

// ====== UPLOAD ẢNH IMGUR ======
function uploadFile(file) {
  if(!file || !file.type || !file.type.startsWith('image/')) {
    alert('Vui lòng chọn đúng định dạng ảnh!');
    return;
  }
  showLoading(true);
  const formData = new FormData();
  formData.append('image', file);

  fetch('https://api.imgur.com/3/image', {
    method: 'POST',
    headers: { Authorization: 'Client-ID ' + clientId },
    body: formData
  })
  .then(res => res.json())
  .then(data => {
    showLoading(false);
    if(data && data.success && data.data && data.data.link) {
      const link = data.data.link;
      imgurLinkInput.value = link;
      imagePreview.innerHTML = `<img src="${link}" alt="Thumbnail" loading="lazy">`;
    } else {
      alert('Upload ảnh thất bại!');
    }
  })
  .catch(() => {
    showLoading(false);
    alert('Lỗi upload ảnh!');
  });
}

function showLoading(show) {
  document.getElementById('loadingModal').classList.toggle('show', show);
}

// ====== SLUG AN TOÀN (không dùng \p{Diacritic}) ======
function toSlug(str) {
  return (str || '')
    .toLowerCase()
    .normalize('NFD')
    .replace(/[\u0300-\u036f]/g, '') // loại dấu tiếng Việt an toàn trình duyệt
    .replace(/đ/g, 'd').replace(/Đ/g, 'd')
    .replace(/[^a-z0-9]+/g, '-')
    .replace(/(^-|-$)/g, '');
}

// ====== LSI KEYWORDS ======
function buildLSI(language, topic, country, subject) {
  const base = [topic, country, subject].filter(Boolean);
  const uniq = (arr) => [...new Set(arr.filter(Boolean))];
  let lsi;
  if (language === 'vi') {
    lsi = uniq([
      `${topic} ${country}`,
      `${topic} đẹp`,
      `gái xinh ${country}`,
      `${topic} nổi bật`,
      `hình ảnh ${topic}`,
      `video ${topic}`,
      `${topic} ${subject}`,
      `hot girl ${country}`,
      `idol ${country}`
    ]);
  } else {
    lsi = uniq([
      `${country} ${topic}`,
      `${topic} photos`,
      `${topic} video`,
      `${subject} ${topic}`,
      `beautiful ${topic}`,
      `trending ${topic}`
    ]);
  }
  return `<ul>` + lsi.map(k => `<li>${k}</li>`).join('') + `</ul>`;
}

// ====== TẠO BÀI VIẾT ======
function generateArticle() {
  const img = document.getElementById('imgurLink').value.trim();
  const video = document.getElementById('videoLink').value.trim();
  const name = document.getElementById('characterName').value.trim();
  const country = document.getElementById('country').value;
  const topic = document.getElementById('topic').value;
  const style = document.getElementById('style').value;
  const language = document.getElementById('language').value;

  if(!img || !video) { alert('Vui lòng nhập ảnh và video!'); return; }

  showLoading(true);
  setTimeout(() => {
    try {
      const T = contentTemplates[language];
      const countryLower = T.countries[country] || country;
      const subject = name || (language === 'vi' ? `cô gái ${countryLower}` : `the ${countryLower} girl`);
      const topicName = T.topics[topic] || topic;

      // Intro/body theo topic đặc thù hoặc style fallback
      const topicContent = T.topicContent && T.topicContent[topic];
      let intro, content;
      if (topicContent) {
        intro = topicContent.intro.replaceAll('{subject}', subject);
        const bodyContent = topicContent.body.replaceAll('{subject}', subject);
        const outroContent = topicContent.outro.replaceAll('{subject}', subject);
        content = `<p>${bodyContent}</p><p>${outroContent}</p>`;
      } else {
        const styleTemplates = T[style];
        if (!styleTemplates) {
          alert('Phong cách này chưa được hỗ trợ!');
          showLoading(false);
          return;
        }
        intro = pick(styleTemplates.intros).replaceAll('{subject}', subject);
        const bodyParagraphs = styleTemplates.bodies.map(p => `<p>${p.replaceAll('{subject}', subject)}</p>`).join('');
        const outro = pick(styleTemplates.outros).replaceAll('{subject}', subject);
        content = bodyParagraphs + `<p>${outro}</p>`;
      }

      // Title + Description đa ngôn ngữ
      let title, desc;
      if (language === 'vi') {
        title = `${topicName} ${subject} - ${country}`;
        desc = `Xem ${topicName} ${country} của ${subject} đang được quan tâm với nhiều lượt xem, chia sẻ.`;
      } else {
        title = `${subject} ${topicName} - ${country}`;
        desc = `Watch ${countryLower} ${topicName} of ${subject} getting attention with many views and shares.`;
      }
      const slug = toSlug(title);

      // JSON-LD Article + VideoObject (đặt trong nội dung để Blogger vẫn hiểu)
      const nowISO = new Date().toISOString();
      const jsonld = {
        "@context": "https://schema.org",
        "@type": "Article",
        "headline": title,
        "description": desc,
        "image": img,
        "datePublished": nowISO,
        "author": {"@type": "Person", "name": subject},
        "mainEntityOfPage": {"@type": "WebPage", "@id": `https://www.example.com/${slug}`},
        "video": {
          "@type": "VideoObject",
          "name": title,
          "description": desc,
          "thumbnailUrl": img,
          "uploadDate": nowISO,
          "contentUrl": video
        }
      };

      const lsiHTML = buildLSI(language, topicName, country, subject);

      const html = `
<!-- Canonical gợi ý (dán vào theme/hoặc dùng tham khảo) -->
<!-- <link rel="canonical" href="https://www.example.com/${slug}"> -->

<!-- Schema JSON-LD cho Google -->
<script type="application/ld+json">${JSON.stringify(jsonld)}</script>

<!-- Tiêu đề H1 -->
<h1>${title}</h1>

<!-- Thumbnail -->
<div class="separator" style="clear: both;">
  <a href="${img}" style="display:block; padding: 1em 0; text-align:center;" target="_blank" rel="noopener noreferrer">
    <img alt="${subject}" src="${img}" loading="lazy" />
  </a>
</div>

<!-- Nội dung bài viết -->
<p>${intro}</p>

<h2>${language === 'vi' ? 'Giới thiệu' : 'Introduction'} ${subject}</h2>
${content}

<h2>${language === 'vi' ? 'Video' : 'Video'} ${topicName}</h2>
<video class="live-wp" controls controlsList="nodownload" preload="metadata" muted playsinline poster="${img}" style="max-width:100%; border-radius:8px;">
  <source src="${video}" type="video/mp4" />
  ${language === 'vi' ? 'Trình duyệt không hỗ trợ video.' : 'Your browser does not support the video tag.'}
</video>

<h2>${language === 'vi' ? 'Từ khóa liên quan' : 'Related keywords'}</h2>
${lsiHTML}

<!-- Internal link theo tag/chủ đề -->
<p>${language === 'vi' ? 'Xem thêm:' : 'See more:'} <a href="/search/label/${toSlug(topicName)}">${topicName}</a></p>

<!-- Nút tải về/TG channel -->
<div style="text-align:center; margin-top:12px;">
  <a class="btnlook download-wall" href="${video}" style="color:#000;" title="Download Video" target="_blank" rel="noopener">${language === 'vi' ? 'Tải về' : 'Download'}</a>
</div>`;

      document.getElementById('resultHTML').value = html.trim();
      showLoading(false);
    } catch (error) {
      console.error(error);
      alert('Có lỗi khi tạo bài viết!');
      showLoading(false);
    }
  }, 300);
}

function copyResult() {
  const textarea = document.getElementById('resultHTML');
  textarea.focus();
  textarea.select();
  try { document.execCommand('copy'); alert('✅ Đã sao chép HTML!'); }
  catch(e){ navigator.clipboard.writeText(textarea.value).then(()=>alert('✅ Đã sao chép HTML!')).catch(()=>alert('Không thể sao chép tự động. Hãy copy thủ công.')); }
}

function pick(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

// Drag-drop & click upload
['dragover','dragleave','drop','click'].forEach(evt=>{
  dropzone.addEventListener(evt, e => {
    e.preventDefault();
    if(evt==='dragover') dropzone.classList.add('dragover');
    if(evt==='dragleave') dropzone.classList.remove('dragover');
    if(evt==='drop') {
      dropzone.classList.remove('dragover');
      if(e.dataTransfer.files && e.dataTransfer.files.length) uploadFile(e.dataTransfer.files[0]);
    }
    if(evt==='click') {
      const fileInput=document.createElement('input');
      fileInput.type='file'; fileInput.accept='image/*';
      fileInput.onchange=()=>{ if(fileInput.files && fileInput.files.length) uploadFile(fileInput.files[0]); };
      fileInput.click();
    }
  });
});
</script>

</body>
</html>
